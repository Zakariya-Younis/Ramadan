# ููุฎุต ูุธุงู ุงูุงุฎุชุจุงุฑ - ุงูุชุญูู ุงูููุงุฆู

## โ ุงูุชุญูู ูู ุงูุฃุชูุชุฉ ุงููุงููุฉ

### 1. ูุธุงู ุงููุญุงููุฉ ุงููุงุญุฏุฉ ููููุงู โ
**ุงูุขููุฉ:**
- ูุชู ุงูุชุญูู ูู ูุฌูุฏ `daily_session` ููููู ุงูุญุงูู ุนูุฏ ุฏุฎูู ุตูุญุฉ ุงูุงุฎุชุจุงุฑ
- ุฅุฐุง ููุฌุฏุช ุฌูุณุฉ ููุชููุฉ (`completed: true`)ุ ููุนุฑุถ ููุฎุต ุงููุชุงุฆุฌ ููุท
- ูุง ูููู ุฅูุดุงุก ุฌูุณุฉ ุฌุฏูุฏุฉ ุฅุฐุง ูุงูุช ููุงู ุฌูุณุฉ ูููุณ ุงูููู (ููุฏ `UNIQUE(user_id, session_date)`)

**ุงูููุฏ ุงููุณุคูู:**
```typescript
// ุงูุณุทุฑ 83-91: ุงูุชุญูู ูู ุงูุฌูุณุฉ ุงูููููุฉ
const today = new Date().toISOString().split('T')[0]
const { data: existingSession } = await supabase
    .from('daily_sessions')
    .select('*')
    .eq('user_id', user.id)
    .eq('session_date', today)
    .single()
```

### 2. ุงุฎุชูุงุฑ 3 ุฃุณุฆูุฉ ุนุดูุงุฆูุฉ โ
**ุงูุขููุฉ:**
- ูุชู ุงุฎุชูุงุฑ ุณุคุงู ูุงุญุฏ ูู ูู ูุณุชูู (ุณููุ ูุชูุณุทุ ุตุนุจ)
- ุงูุฃุณุฆูุฉ ุนุดูุงุฆูุฉ ูู ุจูู 10 ุฃุณุฆูุฉ ูุชุงุญุฉ ููู ูุณุชูู
- ูุชู ุงุณุชุจุนุงุฏ ุงูุฃุณุฆูุฉ ุงูุชู ุฃุฌุงุจ ุนูููุง ุงููุณุชุฎุฏู ุณุงุจูุงู

**ุงูููุฏ ุงููุณุคูู:**
```typescript
// ุงูุณุทุฑ 124-178: ุฅูุดุงุก ุฌูุณุฉ ุฌุฏูุฏุฉ
for (const diff of difficulties) {
    const { data: questions } = await supabase
        .from('questions')
        .select('*')
        .eq('difficulty', diff)
        .eq('is_bonus', false)
        .not('id', 'in', `(${answeredIds.join(',') || 'null'})`)
        .limit(10)
    
    const randomIndex = Math.floor(Math.random() * questions.length)
    selectedQuestions.push(questions[randomIndex])
}
```

### 3. ููุน ุงูุชุญุฏูุซ ููุญุตูู ุนูู ุฃุณุฆูุฉ ุฌุฏูุฏุฉ โ
**ุงูุขููุฉ:**
- ุงูุฃุณุฆูุฉ ูุญููุธุฉ ูู `daily_sessions.question_ids` ุนูุฏ ุฅูุดุงุก ุงูุฌูุณุฉ
- ุนูุฏ ุชุญุฏูุซ ุงูุตูุญุฉุ ูุชู ุชุญููู ููุณ ุงูุฃุณุฆูุฉ ูู ุงูุฌูุณุฉ ุงูููุฌูุฏุฉ
- ูุง ูุชู ุฅูุดุงุก ุฃุณุฆูุฉ ุฌุฏูุฏุฉ ุฅูุง ูู ุงูููู ุงูุชุงูู

**ุงูููุฏ ุงููุณุคูู:**
```typescript
// ุงูุณุทุฑ 93-115: ุชุญููู ุงูุฌูุณุฉ ุงูููุฌูุฏุฉ
if (existingSession) {
    setSession(existingSession)
    // ุชุญููู ุงูุณุคุงู ุงูุญุงูู ูู question_ids ุงููุญููุธุฉ
    const questionId = existingSession.question_ids[existingSession.current_question_index]
    await loadQuestion(questionId)
}
```

### 4. ุชุชุจุน ุงูุชูุฏู โ
**ุงูุขููุฉ:**
- `current_question_index`: ูุชุชุจุน ุงูุณุคุงู ุงูุญุงูู (0ุ 1ุ 2)
- `user_answers`: ูุญูุธ ูู ุฅุฌุงุจุฉ ูุน ุงููุชูุฌุฉ
- `total_score`: ูุชู ุชุญุฏูุซู ุจุนุฏ ูู ุฅุฌุงุจุฉ
- `completed`: ูุชู ุชุนูููู ุฅูู `true` ุจุนุฏ ุงูุณุคุงู ุงูุซุงูุซ

**ุงูููุฏ ุงููุณุคูู:**
```typescript
// ุงูุณุทุฑ 233-245: ุชุญุฏูุซ ุงูุฌูุณุฉ ุจุนุฏ ูู ุฅุฌุงุจุฉ
const nextIndex = session.current_question_index + 1
const isCompleted = nextIndex >= 3

await supabase
    .from('daily_sessions')
    .update({
        current_question_index: nextIndex,
        total_score: newTotalScore,
        completed: isCompleted
    })
    .eq('id', session.id)
```

## ๐จ ุญุงูุงุช ุงููุงุฌูุฉ (UI States)

### 1. ุญุงูุฉ ุงูุชุญููู โณ
**ูุชู:** ุนูุฏ ุชุญููู ุงูุตูุญุฉ ูุฃูู ูุฑุฉ
```typescript
if (loading) {
    return <Loader2 className="animate-spin" />
}
```

### 2. ุญุงูุฉ ุงูุญุธุฑ ๐ซ
**ูุชู:** ุฅุฐุง ูุงู ุงููุณุชุฎุฏู ูุญุธูุฑุงู (`is_banned: true`)
```typescript
if (isBanned) {
    return (
        <div>
            <h1>ุชู ุญุธุฑ ุญุณุงุจู</h1>
            <p>ููุฃุณูุ ุชู ุญุธุฑ ุญุณุงุจู ูู ูุจู ุงูุฅุฏุงุฑุฉ</p>
        </div>
    )
}
```

### 3. ุญุงูุฉ ุงูุงุฎุชุจุงุฑ ุงููุดุท ๐
**ูุชู:** ุนูุฏ ุงูุฅุฌุงุจุฉ ุนูู ุงูุฃุณุฆูุฉ (0-2)
**ุงูููููุงุช:**
- ุดุฑูุท ุงูุชูุฏู: 3 ุฏูุงุฆุฑ (ููุชูู โุ ุญุงูู ๐กุ ูุงุฏู โช)
- ูุณุชูู ุงูุตุนูุจุฉ: ุดุงุฑุฉ ููููุฉ (ุณูู ๐ขุ ูุชูุณุท ๐กุ ุตุนุจ ๐ด)
- ุนุฏุงุฏ ุงูุฃุณุฆูุฉ: "ุงูุณุคุงู 1 ูู 3"
- ุงูุฎูุงุฑุงุช: 4 ุฃุฒุฑุงุฑ ูุงุจูุฉ ููููุฑ
- ุฑุณุงูุฉ ุชุญููุฒูุฉ: "ุงูุณุคุงู ุงููุงุฏู ูุชูุณุท ููููุงูุ ูู ุฃูุช ูุณุชุนุฏุ"

### 4. ุญุงูุฉ ุนุฑุถ ุงููุชูุฌุฉ โโ
**ูุชู:** ุจุนุฏ ุงูุฅุฌุงุจุฉ ุนูู ูู ุณุคุงู (2 ุซุงููุฉ)
**ุงูููููุงุช:**
- ุฅุฌุงุจุฉ ุตุญูุญุฉ: โ ุฃุฎุถุฑ + "ุฅุฌุงุจุฉ ุตุญูุญุฉ! ๐" + ุงูููุงุท
- ุฅุฌุงุจุฉ ุฎุงุทุฆุฉ: โ ุฃุญูุฑ + "ููุฃุณูุ ุฅุฌุงุจุฉ ุฎุงุทุฆุฉ" + ุงูุฅุฌุงุจุฉ ุงูุตุญูุญุฉ

### 5. ุญุงูุฉ ุงูุฅููุงู ๐
**ูุชู:** ุจุนุฏ ุงูุฅุฌุงุจุฉ ุนูู ุงูุฃุณุฆูุฉ ุงูุซูุงุซุฉ
**ุงูููููุงุช:**
- ุนููุงู: "ุฃุญุณูุช! ๐"
- ุงูุชุงุฑูุฎ: ุงูุชุงุฑูุฎ ุงููุฌุฑู ุงููุงูู
- ุงูููุงุท ุงููููุฉ: ุฑูู ูุจูุฑ (ูู 30)
- ููุฎุต ุงูุฅุฌุงุจุงุช: 3 ุฏูุงุฆุฑ ูุน ุงูููุงุท ููู ุณุคุงู
- ูุชูุฌุฉ: "ูุชูุฌุชู: X ูู 3 ุฅุฌุงุจุงุช ุตุญูุญุฉ"
- ุฑุณุงูุฉ: "โฐ ุชุญุฏู ุฌุฏูุฏ ุบุฏุงู!"
- ุฃุฒุฑุงุฑ: ููุญุฉ ุงููุชุตุฏุฑูู + ุงูุนูุฏุฉ

### 6. ุญุงูุฉ ุณุคุงู ุงูุจููุต ๐
**ูุชู:** ุจุนุฏ ุงูุฅููุงู ุฅุฐุง ูุงู ููุงู ุณุคุงู ุจููุต ููููู
**ุงูููููุงุช:**
- ุฑุฃุณ ุฐูุจู: "๐ ุณุคุงู ุจููุต!"
- ูุตู: "ูุฑุตุฉ ููุญุตูู ุนูู 20 ููุทุฉ ุฅุถุงููุฉ!"
- ููุณ ุขููุฉ ุงูุณุคุงู ุงูุนุงุฏู

### 7. ุญุงูุฉ ุนุฏู ูุฌูุฏ ุฃุณุฆูุฉ โ๏ธ
**ูุชู:** ุฅุฐุง ูู ููู ููุงู ุฃุณุฆูุฉ ูุงููุฉ ูู ุงูุจูู
```typescript
if (selectedQuestions.length < 3) {
    alert('ุนุฐุฑุงูุ ูุง ุชูุฌุฏ ุฃุณุฆูุฉ ูุงููุฉ ูู ุงูุจูู!')
}
```

## ๐ ูุธุงู ุงูููุงุท

| ุงููุณุชูู | ุงูููุงุท |
|---------|--------|
| ุณูู     | 5      |
| ูุชูุณุท   | 10     |
| ุตุนุจ     | 15     |
| ุจููุต    | 20     |

**ุงูุญุฏ ุงูุฃูุตู ุงููููู:**
- ุจุฏูู ุจููุต: 30 ููุทุฉ
- ูุน ุจููุต: 50 ููุทุฉ

## ๐ ุชุฏูู ุงูุนูู ุงููุงูู

```mermaid
graph TD
    A[ุฏุฎูู ุตูุญุฉ ุงูุงุฎุชุจุงุฑ] --> B{ุชุญูู ูู ุงูุญุธุฑ}
    B -->|ูุญุธูุฑ| C[ุนุฑุถ ุดุงุดุฉ ุงูุญุธุฑ]
    B -->|ุบูุฑ ูุญุธูุฑ| D{ุฌูุณุฉ ุงูููู ููุฌูุฏุฉุ}
    
    D -->|ูุง| E[ุฅูุดุงุก ุฌูุณุฉ ุฌุฏูุฏุฉ]
    E --> F[ุงุฎุชูุงุฑ 3 ุฃุณุฆูุฉ ุนุดูุงุฆูุฉ]
    F --> G[ุนุฑุถ ุงูุณุคุงู 1 - ุณูู]
    
    D -->|ูุนู| H{ุงูุฌูุณุฉ ููุชููุฉุ}
    H -->|ูุนู| I[ุนุฑุถ ุดุงุดุฉ ุงูุฅููุงู]
    H -->|ูุง| J[ุชุญููู ุงูุณุคุงู ุงูุญุงูู]
    
    G --> K[ุงููุณุชุฎุฏู ูุฎุชุงุฑ ุฅุฌุงุจุฉ]
    K --> L[ุนุฑุถ ุงููุชูุฌุฉ 2 ุซุงููุฉ]
    L --> M{ูู ูุฐุง ุงูุณุคุงู ุงูุซุงูุซุ}
    
    M -->|ูุง| N[ุงูุงูุชูุงู ููุณุคุงู ุงูุชุงูู]
    N --> K
    
    M -->|ูุนู| O[ุชุนููู completed = true]
    O --> P{ููุฌุฏ ุณุคุงู ุจููุตุ}
    
    P -->|ูุนู| Q[ุนุฑุถ ุณุคุงู ุงูุจููุต]
    Q --> R[ุนุฑุถ ุงููุชูุฌุฉ ุงูููุงุฆูุฉ]
    
    P -->|ูุง| R
    I --> S{ููุฌุฏ ุณุคุงู ุจููุต ูู ููุฌุจุ}
    S -->|ูุนู| Q
    S -->|ูุง| R
```

## โ ุงููุชูุฌุฉ ุงูููุงุฆูุฉ

**ุงููุธุงู ููุคุชูุช ุจุงููุงูู โ**

1. โ ูุญุงููุฉ ูุงุญุฏุฉ ููููุงู (ููุฏ ูุงุนุฏุฉ ุงูุจูุงูุงุช + ููุทู ุงูุชุทุจูู)
2. โ 3 ุฃุณุฆูุฉ ุนุดูุงุฆูุฉ (ุณููุ ูุชูุณุทุ ุตุนุจ)
3. โ ููุน ุงูุชุญุฏูุซ ููุญุตูู ุนูู ุฃุณุฆูุฉ ุฌุฏูุฏุฉ
4. โ ุชุชุจุน ุงูุชูุฏู ุจุฏูุฉ
5. โ ุฃุณุฆูุฉ ุจููุต ูู ุฃูุงู ูุญุฏุฏุฉ
6. โ ูุงุฌูุฉ ูุงุถุญุฉ ูุฌููุน ุงูุญุงูุงุช
7. โ ุฑุณุงุฆู ุชุญููุฒูุฉ
8. โ ุญูุงูุฉ ูู ุงูุบุด
9. โ ุชุญุฏูุซ ููุญุฉ ุงููุชุตุฏุฑูู ุชููุงุฆูุงู
10. โ ุชุชุจุน ูุดุงุท ุงููุณุชุฎุฏู

**ูุง ููุฌุฏ ุฃู ุชุฏุฎู ูุฏูู ูุทููุจ - ูู ุดูุก ุขูู! ๐**
